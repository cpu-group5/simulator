まず、assembler/README.mdを読んで、アセンブルを完了して下さい。

引き続きfibを例にして進めます。

./simulator.sh fib ifile.bin

として実行します。ifile.binは空のファイルです。minrtを実行する時は、minrt_ifile.binに置き換えてください。これは、レイトレ用の設計図データを渡しています。

シミュレータが起動したら、末尾の表を参考にしてシミュレーションして下さい。

終了すると、fib_result.binが生成されます。

hexdump　fib_result.bin

とすると、c2と表示されます。フィボナッチ数列の第20項=10946=0x2AC2ですので、正しく計算できています。2ac2でなくc2なのは、0xFFまでの値しかアウトプットできない為です。minrtの時にはこのような問題は起こりません。

なお、レイトレをやるときはminrt_result.binをminrt_result.ppmへ拡張子を変更してからビューワーで見て下さい。

GPRは%r29, %r30だけ16進数表示にしてある

c : 実質終了までずっと実行

j num : 最初から数えてnum回命令が実行されるまで続ける

pj : ジャンプ時にどこからどこへ行くかの表示のON/OFFの切り替え

p : レジスタの状態等を再表示する

m [num]: メモリの内容を表示する。指定されてなければ前回と同じアドレスを参照する。
u : 前回表示したメモリのアドレスより一ブロック分前のメモリの内容を表示する

d : 前回表示したメモリのアドレスより一ブロック分後のメモリの内容を表示する

md : メモリの内容を次回から符号付き整数で表すようにする

mh : メモリの内容を次回から16進数で表すようにする

mf : メモリの内容を次回から小数表示で表すようにする

b : ブレークポイントの表示

b num : ブレークポイントにnumを追加

bc : ブレークポイントの全削除
